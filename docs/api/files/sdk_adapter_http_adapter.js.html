<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>sdk/adapter/http_adapter.js - CitiMobileChallenge</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="CitiMobileChallenge"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AggregateCollection.html">AggregateCollection</a></li>
            
                <li><a href="../classes/Application.html">Application</a></li>
            
                <li><a href="../classes/Authentication.html">Authentication</a></li>
            
                <li><a href="../classes/Authorization.html">Authorization</a></li>
            
                <li><a href="../classes/Base64.html">Base64</a></li>
            
                <li><a href="../classes/BelongsTo.html">BelongsTo</a></li>
            
                <li><a href="../classes/CapitalMarketsActivity.html">CapitalMarketsActivity</a></li>
            
                <li><a href="../classes/CapitalMarketsActivityActivities.html">CapitalMarketsActivityActivities</a></li>
            
                <li><a href="../classes/CapitalMarketsActivityAll.html">CapitalMarketsActivityAll</a></li>
            
                <li><a href="../classes/CapitalMarketsActivityCount.html">CapitalMarketsActivityCount</a></li>
            
                <li><a href="../classes/CapitalMarketsActivityCountExactMatch.html">CapitalMarketsActivityCountExactMatch</a></li>
            
                <li><a href="../classes/CapitalMarketsActivityExactMatch.html">CapitalMarketsActivityExactMatch</a></li>
            
                <li><a href="../classes/CapitalMarketsContact.html">CapitalMarketsContact</a></li>
            
                <li><a href="../classes/CapitalMarketsContactAll.html">CapitalMarketsContactAll</a></li>
            
                <li><a href="../classes/CapitalMarketsContactContacts.html">CapitalMarketsContactContacts</a></li>
            
                <li><a href="../classes/CapitalMarketsContactCount.html">CapitalMarketsContactCount</a></li>
            
                <li><a href="../classes/CapitalMarketsContactCountExactMatch.html">CapitalMarketsContactCountExactMatch</a></li>
            
                <li><a href="../classes/CapitalMarketsContactExactMatch.html">CapitalMarketsContactExactMatch</a></li>
            
                <li><a href="../classes/CapitalMarketsContentService.html">CapitalMarketsContentService</a></li>
            
                <li><a href="../classes/CapitalMarketsContentServiceAll.html">CapitalMarketsContentServiceAll</a></li>
            
                <li><a href="../classes/CapitalMarketsContentServiceContentServices.html">CapitalMarketsContentServiceContentServices</a></li>
            
                <li><a href="../classes/CapitalMarketsContentServiceCount.html">CapitalMarketsContentServiceCount</a></li>
            
                <li><a href="../classes/CapitalMarketsContentServiceCountExactMatch.html">CapitalMarketsContentServiceCountExactMatch</a></li>
            
                <li><a href="../classes/CapitalMarketsContentServiceExactMatch.html">CapitalMarketsContentServiceExactMatch</a></li>
            
                <li><a href="../classes/CapitalMarketsLogin.html">CapitalMarketsLogin</a></li>
            
                <li><a href="../classes/CapitalMarketsLoginAll.html">CapitalMarketsLoginAll</a></li>
            
                <li><a href="../classes/CapitalMarketsLoginCount.html">CapitalMarketsLoginCount</a></li>
            
                <li><a href="../classes/CapitalMarketsLoginCountExactMatch.html">CapitalMarketsLoginCountExactMatch</a></li>
            
                <li><a href="../classes/CapitalMarketsLoginExactMatch.html">CapitalMarketsLoginExactMatch</a></li>
            
                <li><a href="../classes/CapitalMarketsOrder.html">CapitalMarketsOrder</a></li>
            
                <li><a href="../classes/CapitalMarketsOrderAll.html">CapitalMarketsOrderAll</a></li>
            
                <li><a href="../classes/CapitalMarketsOrderCount.html">CapitalMarketsOrderCount</a></li>
            
                <li><a href="../classes/CapitalMarketsOrderCountExactMatch.html">CapitalMarketsOrderCountExactMatch</a></li>
            
                <li><a href="../classes/CapitalMarketsOrderExactMatch.html">CapitalMarketsOrderExactMatch</a></li>
            
                <li><a href="../classes/CapitalMarketsRevenue.html">CapitalMarketsRevenue</a></li>
            
                <li><a href="../classes/CapitalMarketsRevenueAll.html">CapitalMarketsRevenueAll</a></li>
            
                <li><a href="../classes/CapitalMarketsRevenueCount.html">CapitalMarketsRevenueCount</a></li>
            
                <li><a href="../classes/CapitalMarketsRevenueCountExactMatch.html">CapitalMarketsRevenueCountExactMatch</a></li>
            
                <li><a href="../classes/CapitalMarketsRevenueExactMatch.html">CapitalMarketsRevenueExactMatch</a></li>
            
                <li><a href="../classes/CapitalMarketsRevenueRevenues.html">CapitalMarketsRevenueRevenues</a></li>
            
                <li><a href="../classes/CapitalMarketsTrading.html">CapitalMarketsTrading</a></li>
            
                <li><a href="../classes/Class.html">Class</a></li>
            
                <li><a href="../classes/Collection.html">Collection</a></li>
            
                <li><a href="../classes/Collections.html">Collections</a></li>
            
                <li><a href="../classes/Cookie.html">Cookie</a></li>
            
                <li><a href="../classes/CorporatePayments.html">CorporatePayments</a></li>
            
                <li><a href="../classes/CorporatePaymentsAccount.html">CorporatePaymentsAccount</a></li>
            
                <li><a href="../classes/CorporatePaymentsAccountAll.html">CorporatePaymentsAccountAll</a></li>
            
                <li><a href="../classes/CorporatePaymentsAccountCount.html">CorporatePaymentsAccountCount</a></li>
            
                <li><a href="../classes/CorporatePaymentsAccountCountExactMatch.html">CorporatePaymentsAccountCountExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsAccountExactMatch.html">CorporatePaymentsAccountExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsBeneficiary.html">CorporatePaymentsBeneficiary</a></li>
            
                <li><a href="../classes/CorporatePaymentsBeneficiaryAll.html">CorporatePaymentsBeneficiaryAll</a></li>
            
                <li><a href="../classes/CorporatePaymentsBeneficiaryCount.html">CorporatePaymentsBeneficiaryCount</a></li>
            
                <li><a href="../classes/CorporatePaymentsBeneficiaryCountExactMatch.html">CorporatePaymentsBeneficiaryCountExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsBeneficiaryExactMatch.html">CorporatePaymentsBeneficiaryExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxBooking.html">CorporatePaymentsCrossBorderFxBooking</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxBookingAll.html">CorporatePaymentsCrossBorderFxBookingAll</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxBookingCount.html">CorporatePaymentsCrossBorderFxBookingCount</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxBookingCountExactMatch.html">CorporatePaymentsCrossBorderFxBookingCountExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxBookingExactMatch.html">CorporatePaymentsCrossBorderFxBookingExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxPayment.html">CorporatePaymentsCrossBorderFxPayment</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxPaymentAll.html">CorporatePaymentsCrossBorderFxPaymentAll</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxPaymentCount.html">CorporatePaymentsCrossBorderFxPaymentCount</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxPaymentCountExactMatch.html">CorporatePaymentsCrossBorderFxPaymentCountExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxPaymentExactMatch.html">CorporatePaymentsCrossBorderFxPaymentExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxPaymentFxPayments.html">CorporatePaymentsCrossBorderFxPaymentFxPayments</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxQuote.html">CorporatePaymentsCrossBorderFxQuote</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxQuoteAll.html">CorporatePaymentsCrossBorderFxQuoteAll</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxQuoteCount.html">CorporatePaymentsCrossBorderFxQuoteCount</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxQuoteCountExactMatch.html">CorporatePaymentsCrossBorderFxQuoteCountExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsCrossBorderFxQuoteExactMatch.html">CorporatePaymentsCrossBorderFxQuoteExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsLogin.html">CorporatePaymentsLogin</a></li>
            
                <li><a href="../classes/CorporatePaymentsLoginAll.html">CorporatePaymentsLoginAll</a></li>
            
                <li><a href="../classes/CorporatePaymentsLoginCount.html">CorporatePaymentsLoginCount</a></li>
            
                <li><a href="../classes/CorporatePaymentsLoginCountExactMatch.html">CorporatePaymentsLoginCountExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsLoginExactMatch.html">CorporatePaymentsLoginExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsPayment.html">CorporatePaymentsPayment</a></li>
            
                <li><a href="../classes/CorporatePaymentsPaymentAll.html">CorporatePaymentsPaymentAll</a></li>
            
                <li><a href="../classes/CorporatePaymentsPaymentCount.html">CorporatePaymentsPaymentCount</a></li>
            
                <li><a href="../classes/CorporatePaymentsPaymentCountExactMatch.html">CorporatePaymentsPaymentCountExactMatch</a></li>
            
                <li><a href="../classes/CorporatePaymentsPaymentExactMatch.html">CorporatePaymentsPaymentExactMatch</a></li>
            
                <li><a href="../classes/DefaultAdapter.html">DefaultAdapter</a></li>
            
                <li><a href="../classes/Dispatcher.html">Dispatcher</a></li>
            
                <li><a href="../classes/HasMany.html">HasMany</a></li>
            
                <li><a href="../classes/HasOne.html">HasOne</a></li>
            
                <li><a href="../classes/HttpAdapter.html">HttpAdapter</a></li>
            
                <li><a href="../classes/JSON.html">JSON</a></li>
            
                <li><a href="../classes/LargeLocalStorage.html">LargeLocalStorage</a></li>
            
                <li><a href="../classes/MockServer.html">MockServer</a></li>
            
                <li><a href="../classes/Model.html">Model</a></li>
            
                <li><a href="../classes/Models.html">Models</a></li>
            
                <li><a href="../classes/Relationship.html">Relationship</a></li>
            
                <li><a href="../classes/RetailBanking.html">RetailBanking</a></li>
            
                <li><a href="../classes/RetailBankingAccount.html">RetailBankingAccount</a></li>
            
                <li><a href="../classes/RetailBankingAccountAll.html">RetailBankingAccountAll</a></li>
            
                <li><a href="../classes/RetailBankingAccountBalance.html">RetailBankingAccountBalance</a></li>
            
                <li><a href="../classes/RetailBankingAccountBalanceAll.html">RetailBankingAccountBalanceAll</a></li>
            
                <li><a href="../classes/RetailBankingAccountBalanceCount.html">RetailBankingAccountBalanceCount</a></li>
            
                <li><a href="../classes/RetailBankingAccountBalanceCountExactMatch.html">RetailBankingAccountBalanceCountExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingAccountBalanceExactMatch.html">RetailBankingAccountBalanceExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingAccountCount.html">RetailBankingAccountCount</a></li>
            
                <li><a href="../classes/RetailBankingAccountCountExactMatch.html">RetailBankingAccountCountExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingAccountExactMatch.html">RetailBankingAccountExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingAccountFundTransfer.html">RetailBankingAccountFundTransfer</a></li>
            
                <li><a href="../classes/RetailBankingAccountFundTransferAll.html">RetailBankingAccountFundTransferAll</a></li>
            
                <li><a href="../classes/RetailBankingAccountFundTransferCount.html">RetailBankingAccountFundTransferCount</a></li>
            
                <li><a href="../classes/RetailBankingAccountFundTransferCountExactMatch.html">RetailBankingAccountFundTransferCountExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingAccountFundTransferExactMatch.html">RetailBankingAccountFundTransferExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingAccountTransaction.html">RetailBankingAccountTransaction</a></li>
            
                <li><a href="../classes/RetailBankingAccountTransactionAll.html">RetailBankingAccountTransactionAll</a></li>
            
                <li><a href="../classes/RetailBankingAccountTransactionCount.html">RetailBankingAccountTransactionCount</a></li>
            
                <li><a href="../classes/RetailBankingAccountTransactionCountExactMatch.html">RetailBankingAccountTransactionCountExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingAccountTransactionExactMatch.html">RetailBankingAccountTransactionExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingForeignCurrency.html">RetailBankingForeignCurrency</a></li>
            
                <li><a href="../classes/RetailBankingForeignCurrencyAll.html">RetailBankingForeignCurrencyAll</a></li>
            
                <li><a href="../classes/RetailBankingForeignCurrencyCount.html">RetailBankingForeignCurrencyCount</a></li>
            
                <li><a href="../classes/RetailBankingForeignCurrencyCountExactMatch.html">RetailBankingForeignCurrencyCountExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingForeignCurrencyExactMatch.html">RetailBankingForeignCurrencyExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingForeignCurrencyForeignCurrency.html">RetailBankingForeignCurrencyForeignCurrency</a></li>
            
                <li><a href="../classes/RetailBankingLocation.html">RetailBankingLocation</a></li>
            
                <li><a href="../classes/RetailBankingLocationAll.html">RetailBankingLocationAll</a></li>
            
                <li><a href="../classes/RetailBankingLocationCount.html">RetailBankingLocationCount</a></li>
            
                <li><a href="../classes/RetailBankingLocationCountExactMatch.html">RetailBankingLocationCountExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingLocationExactMatch.html">RetailBankingLocationExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingLocationLocations.html">RetailBankingLocationLocations</a></li>
            
                <li><a href="../classes/RetailBankingLogin.html">RetailBankingLogin</a></li>
            
                <li><a href="../classes/RetailBankingLoginAll.html">RetailBankingLoginAll</a></li>
            
                <li><a href="../classes/RetailBankingLoginCount.html">RetailBankingLoginCount</a></li>
            
                <li><a href="../classes/RetailBankingLoginCountExactMatch.html">RetailBankingLoginCountExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingLoginExactMatch.html">RetailBankingLoginExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingPayee.html">RetailBankingPayee</a></li>
            
                <li><a href="../classes/RetailBankingPayeeAll.html">RetailBankingPayeeAll</a></li>
            
                <li><a href="../classes/RetailBankingPayeeCount.html">RetailBankingPayeeCount</a></li>
            
                <li><a href="../classes/RetailBankingPayeeCountExactMatch.html">RetailBankingPayeeCountExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingPayeeExactMatch.html">RetailBankingPayeeExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingPayeeType.html">RetailBankingPayeeType</a></li>
            
                <li><a href="../classes/RetailBankingPayeeTypeAll.html">RetailBankingPayeeTypeAll</a></li>
            
                <li><a href="../classes/RetailBankingPayeeTypeCount.html">RetailBankingPayeeTypeCount</a></li>
            
                <li><a href="../classes/RetailBankingPayeeTypeCountExactMatch.html">RetailBankingPayeeTypeCountExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingPayeeTypeExactMatch.html">RetailBankingPayeeTypeExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingRewardsCatalog.html">RetailBankingRewardsCatalog</a></li>
            
                <li><a href="../classes/RetailBankingRewardsCatalogAll.html">RetailBankingRewardsCatalogAll</a></li>
            
                <li><a href="../classes/RetailBankingRewardsCatalogCount.html">RetailBankingRewardsCatalogCount</a></li>
            
                <li><a href="../classes/RetailBankingRewardsCatalogCountExactMatch.html">RetailBankingRewardsCatalogCountExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingRewardsCatalogExactMatch.html">RetailBankingRewardsCatalogExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingRewardsCatalogRewardsCatalog.html">RetailBankingRewardsCatalogRewardsCatalog</a></li>
            
                <li><a href="../classes/RetailBankingRewardsRedemption.html">RetailBankingRewardsRedemption</a></li>
            
                <li><a href="../classes/RetailBankingRewardsRedemptionAll.html">RetailBankingRewardsRedemptionAll</a></li>
            
                <li><a href="../classes/RetailBankingRewardsRedemptionCount.html">RetailBankingRewardsRedemptionCount</a></li>
            
                <li><a href="../classes/RetailBankingRewardsRedemptionCountExactMatch.html">RetailBankingRewardsRedemptionCountExactMatch</a></li>
            
                <li><a href="../classes/RetailBankingRewardsRedemptionExactMatch.html">RetailBankingRewardsRedemptionExactMatch</a></li>
            
                <li><a href="../classes/ScopeCollection.html">ScopeCollection</a></li>
            
                <li><a href="../classes/Url.html">Url</a></li>
            
                <li><a href="../classes/Validator.html">Validator</a></li>
            
                <li><a href="../classes/XML.html">XML</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/adapter.html">adapter</a></li>
            
                <li><a href="../modules/adapters.html">adapters</a></li>
            
                <li><a href="../modules/AP.html">AP</a></li>
            
                <li><a href="../modules/auth.html">auth</a></li>
            
                <li><a href="../modules/CitiMobileChallengeSdk.html">CitiMobileChallengeSdk</a></li>
            
                <li><a href="../modules/collection.html">collection</a></li>
            
                <li><a href="../modules/collections.html">collections</a></li>
            
                <li><a href="../modules/MockServer.html">MockServer</a></li>
            
                <li><a href="../modules/model.html">model</a></li>
            
                <li><a href="../modules/models.html">models</a></li>
            
                <li><a href="../modules/relationship.html">relationship</a></li>
            
                <li><a href="../modules/utility.html">utility</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: sdk/adapter/http_adapter.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
* Datasource adapter to connect over HTTP to a non-anypresence API
*
* @module AP
* @submodule adapter
* @class HttpAdapter
*/
AP.adapter.HttpAdapter = (function($class, _JSON, _XML) {

    var _HttpAdapter = $class({
        _constructor: function HttpAdapter() {},

        /**
        * Regular expression to find &quot;{{}}&quot; expressions within templates during interpolation operations.
        * @property interpolationRegexp
        * @type RegExp
        */
        interpolationRegexp: /{{([^{}]*)}}/g,

        /**
        * Context from where to obtain data during an interpolation operation.
        * If an empty context array is provided then the default context will always be the window plus the model attributes.
        * @property interpolationContext
        * @type Array
        */
        interpolationContext: [],

        /**
        * Parse a javascript object from a string
        * @method parseObject
        * @param {String} string to parse into an object
        * @returns {Object}
        */
        parseObject: function(str) {
          result = null, parser = null, xmlDoc = null;
          if(str &amp;&amp; typeof str === &quot;string&quot;) {
            result = eval(&#x27;(&#x27;+str+&#x27;)&#x27;);
          }
          return result;
        },

        /**
        * Interpolate values from a context into a string using {{ }} as a placeholder
        * Example: {{myValue}} with context = { myValue: &quot;foo&quot; }
        * @method interpolate
        * @param {String} string to interpolate values into
        * @param {Object} context from where values are taken
        * @returns {String} string with all values interpolated in
        */
        interpolate: function interpolate(str, context) {
            /**
             * Interpolate strings using {{}} notation
             */
            var resultStr = str.replace(this.interpolationRegexp, function(match, capture) {
                var trimmedCapture = capture.trim();
                var fields = trimmedCapture.split(&quot;.&quot;);
                var replacementValue = context;
                var field = undefined;
                if(fields &amp;&amp; fields.length) {
                    for(var i= 0; i&lt;fields.length; i++) {
                        if(replacementValue === undefined) {
                            break;
                        }
                        field = fields[i];
                        replacementValue = replacementValue[field];
                    }
                    return (replacementValue !== undefined) ? replacementValue : &quot;&quot;;
                } else {
                    return &quot;&quot;;
                }
            });

            return resultStr;
        },

        /**
        * Get the appropiate interpolation context for a specific model.
        * The interpolation context hierarchy goes like this, first the model-defined context if present,
        * if not then the adapter-defined context, finally if no higher context is provided then the default context
        * which is [window, model.attributes] or [window, collection.model, collection.models] if dealing with a collection
        * @method getInterpolationContext
        * @param {AP.model.Model}/{AP.collection.Collection}
        * @returns {Object} interpolation context object
        */
        getInterpolationContext: function(model) {
            var context = {};
            var contextArray = this.interpolationContext;

            if(contextArray.length === 0) {
              contextArray.push(window);
            }

            _.each(contextArray, function(obj) {
                _.extend(context, obj);
            });


            if(model) {
                if(model instanceof AP.model.Model) {
                    _.extend(context, model.attributes);
                }
                if(model instanceof AP.collection.Collection) {
                    _.extend(context, {
                       model: model.model,
                       models: model.models
                    });
                }
            }
            return context;
        },

        /**
        * Get the appropiate adapter_configuration object based on a Model and the action being performed
        * @method getTargetConfiguration
        * @param {AP.model.Model}/{AP.collection.Collection}
        * @param {String} name of the action being performed (i.e. &quot;create&quot;, &quot;update&quot;, &quot;read&quot;, etc.)
        * @returns {Object}
        */
        getTargetConfiguration: function(model, actionName) {
          if(model &amp;&amp; actionName &amp;&amp; actionName !== &quot;&quot;) {
              var targetConfiguration = null;
              if(model instanceof AP.model.Model) {
                  switch(actionName) {
                      case &quot;create&quot;:
                          targetConfiguration = model.adapter_configuration.create;
                          break;
                      case &quot;read&quot;:
                          targetConfiguration = model.adapter_configuration.read;
                          break;
                      case &quot;update&quot;:
                          targetConfiguration = model.adapter_configuration.update;
                          break;
                      case &quot;delete&quot;:
                          targetConfiguration = model.adapter_configuration.delete;
                          break;
                  }
              } else if(model instanceof AP.collection.Collection) {
                  if(actionName === &quot;read&quot;) {
                      targetConfiguration = model.adapter_configuration;
                  }
              }

              return targetConfiguration;
          }
          return null;
        },

        /**
        * Get the final headers object to add into the $.ajax call.
        * This operation entails getting the headers from the adapter,
        * adding the headers from the model if any (overriding the adapter headers if necessary)
        * and interpolating values into the headers if any of them has an interpolation expression as a value
        * @method buildIncrementalHeaders
        * @param {AP.model.Model}/{AP.collection.Collection}
        * @param {Object} the appropiate adapter_configuration for that model and action
        * @param {Object} context to use when interpolating
        * @returns {Object} headers
        */
        buildIncrementalHeaders: function(model, targetConfiguration, context) {
            var headers = {}, name = &quot;&quot;, value = &quot;&quot;;
            _.each(this.headers, function(header) {
              name = this.interpolate(header.name, context);
              value = this.interpolate(header.value, context);
              headers[name] = value;
            }, this);

            if(targetConfiguration) {
                _.each(targetConfiguration.incremental_headers, function(header) {
                  name = this.interpolate(header.name, context);
                  value = this.interpolate(header.value, context);
                  headers[name] = value;
                }, this);
            }

            return headers;
        },

        /**
        * Get the url to hit. Use the adapters url as base then append the url from
        * the target configuration and finally interpolate values into the hole url if necessary.
        * @method buildIncrementalPath
        * @param {AP.model.Model}/{AP.collection.Collection}
        * @param {Object} appropiate adapter_configuration for that model and action
        * @param {Object} context to use during interpolation
        * @returns {String} url
        */
        buildIncrementalPath: function(model, targetConfiguration, context) {
            if(targetConfiguration) {
                var url = this.base_uri.substr(0);
                var path = targetConfiguration.incremental_path;
                if(path) {
                  path = this.interpolate(path, context);
                  url += &quot;/&quot;+path;
                }

                return url;
            }

            return this.base_uri;
        },

        /**
        * Get a query string to send, built from the url parameters using the same incremental logic as with headers.
        * @method buildIncrementalUrlParams
        * @param {AP.model.Model}/{AP.collection.Collection}
        * @param {Object} appropiate adapter_configuration for that model and action
        * @param {Object} context to use during interpolation
        * @returns {String} query string to append to a url
        */
        buildIncrementalUrlParams: function(model, targetConfiguration, context) {
            var urlParams = {}, paramArray = [], queryString = &quot;&quot;;
            _.each(this.url_parameters, function(param) {
               urlParams[param.name] = param.value;
            });
            if(targetConfiguration) {
                _.each(targetConfiguration.incremental_url_parameters, function(param) {
                  urlParams[param.name] = param.value;
                });
            }
            for(var name in urlParams) {
              if(urlParams.hasOwnProperty(name)) {
                paramArray.push({
                  name: name,
                  value: urlParams[name]
                });
              }
            }
            _.map(paramArray, function(param) {
              param.name = this.interpolate(param.name, context);
              param.value = this.interpolate(param.value, context);
              return param;
            }, this);

            queryString = $.param(paramArray);
            return queryString;
        },

        /**
        * Build a body payload string out of a body payload template by concatenating values into it.
        * @method buildBodyPayload
        * @param {AP.model.Model}/{AP.collection.Collection}
        * @param {Object}
        * @param {Object}
        * @returns {String}
        */
        buildBodyPayload: function(model, targetConfiguration, context) {
            var bodyPayload = null;
            if(targetConfiguration &amp;&amp; targetConfiguration.body_payload_template !== &quot;&quot;) {
              bodyPayload = this.parseObject(this.interpolate(targetConfiguration.body_payload_template, context));
            }
            return bodyPayload;
        },

        /**
        * Build a request field mappings object, following the hierarchical structure of headers and interpolating values into them.
        * @method buildRequestFieldMappings
        * @param {AP.model.Model}/{AP.collection.Collection}
        * @param {Object}
        * @param {Object}
        * @returns {Object} key/value request fields
        */
        buildRequestFieldMappings: function(model, targetConfiguration, context) {
            var requestFields = {};
            var requestFieldMappings = [];
            var fieldName = undefined;
            var fieldRemoteName = undefined;

            if(model) {
                if(targetConfiguration) {
                    requestFieldMappings = targetConfiguration.request_field_level_mappings;
                    _.each(requestFieldMappings, function(mapping) {
                        fieldRemoteName = mapping.remote_field_name;
                        fieldName = mapping.field_definition.name;
                        requestFields[fieldRemoteName] = model.get(fieldName);
                    }, this);
                } else {
                    _.extend(requestFields, model.attributes);
                }
            }

            return requestFields;
        },

        /**
        * Build response field mappings object for a single object.
        * @method buildModelResponseFieldMappings
        * @param {Object} data of a model as returned by the server
        * @param {Object}
        */
        buildModelResponseFieldMappings: function(data, targetConfiguration) {
          var responseFields = {};
          var responseFieldMappings = [];

          if(data &amp;&amp; targetConfiguration) {
            responseFieldMappings = targetConfiguration.response_field_level_mappings;
            _.each(responseFieldMappings, function(mapping) {
              var dataTarget = undefined;
              var fieldRemoteName = mapping.remote_field_name;
              var fieldName = mapping.field_definition.name;
              var path = this.getPath(fieldRemoteName, data);
              if(path &amp;&amp; path.length &gt; 0) {
                  dataTarget = path[0];
              }
              if(dataTarget instanceof XMLDocument || dataTarget instanceof Element || dataTarget instanceof Node) {
                  dataTarget = _XML.xmlToString(dataTarget);
              }
              responseFields[fieldName] = dataTarget;
            }, this);
          }

          return responseFields;
        },

        /**
        * Build response field mappings from data returned from the server mapped to either a model or a collection.
        * If &#x27;model&#x27; is a collection then it iterates over the given data and maps fields from each iteration to a single model which gets
        * added to an array. Returns an Object if model is {AP.model.Model} or an Array if model is {AP.collection.Collection}
        * @method buildResponseFieldMappings
        * @param {AP.model.Model}/{AP.collection.Collection}
        * @param {Object} data returned from the server
        * @param {Object}
        * @returns {Object}/{Array}
        */
        buildResponseFieldMappings: function(model, data, targetConfiguration) {
          var responseMappings = undefined, nodeData = undefined;
          if(model &amp;&amp; data &amp;&amp; targetConfiguration) {
            if(model instanceof AP.model.Model) {
              if(data instanceof Array) {
                data = data[0];
              }
              responseMappings = this.buildModelResponseFieldMappings(data, targetConfiguration);
            } else if(model instanceof AP.collection.Collection) {
              responseMappings = [];
              if(data instanceof Array) {
                _.each(data, function(node) {
                  nodeData = this.buildModelResponseFieldMappings(node, targetConfiguration);
                  if(nodeData) {
                    responseMappings.push(nodeData);
                  }
                }, this);
              }
            }
          }
          return responseMappings;
        },

        /**
        * Return the result of evaluating a selector expression over a data object. The expression selector may be either a JSONPath expression or
        * an XPath expression. The method will attempt to evaluate the expression as XPath first and upon failure will treat it as JSONPath. It
        * is meant to provide a homogeneous way of selecting data from responses, regardless of the response format.
        * @method getPath
        * @param {String} selector XPath/JSONPath expression
        * @param {Object} data returned from the server
        * @returns {Object} result of the selector evaluation, if the expression wasn&#x27;t found then it returns undefined.
        */
        getPath: function(expression, data) {
          /**
            Requires JQuery.xpath plugin for XPath expressions
          */
          var result = undefined;
          if(expression &amp;&amp; expression !== &quot;&quot; &amp;&amp; data) {

            try {
              if($.xpath === undefined) {
                console.log(&quot;JQuery.xpath plugin is not defined. You must add it to your application in order to use XPath expressions. Find it at https://github.com/ilinsky/jquery-xpath.&quot;);
                throw new Error(&quot;JQuery.xpath is not defined.&quot;);
              }
              result = $(data).xpath(expression).toArray();
            } catch(error) {
              var _result = _JSON.jsonPath(data, expression);
              if(_result !== false) {
                result = _result;
              }
            }
          }
          return result;
        },

        /**
        * Create the full request to send to the server in a &#x27;send&#x27; call, including success and error callbacks
        * @method buildRequest
        * @param {String}
        * @param {AP.model.Model}/{AP.collection.Collection}
        * @param {Object}
        * @returns {Object} object representing the options to pass to JQuery.ajax function
        */
        buildRequest: function(actionName, model, options) {
          var targetConfiguration = null,
              context = {},
              _options = options || {},
              verb = &quot;GET&quot;,
              urlParamString = undefined,
              ajaxConfiguration = {
                  async: true,
                  crossDomain: true
              };

          targetConfiguration = this.getTargetConfiguration(model, actionName, _options);
          if(actionName &amp;&amp; model &amp;&amp; targetConfiguration) {
              verb = (targetConfiguration.http_verb === &quot;null&quot;) ? &quot;GET&quot; : targetConfiguration.http_verb;

              _.extend(ajaxConfiguration, _options);
              if(!ajaxConfiguration.data) {
                  ajaxConfiguration.data = {};
              }

              context = ajaxConfiguration.interpolationContext;
              if(!context || !(context instanceof Array)) {
                context = this.getInterpolationContext(model);
              }

              ajaxConfiguration.url = this.buildIncrementalPath(model, targetConfiguration, context);
              ajaxConfiguration.headers = this.buildIncrementalHeaders(model, targetConfiguration, context);
              ajaxConfiguration.method = verb;

              urlParamString = this.buildIncrementalUrlParams(model, targetConfiguration, context);
              //  Append query string to url
              if(urlParamString &amp;&amp; urlParamString !== &quot;&quot;) {
                ajaxConfiguration.url += &quot;?&quot;+urlParamString;
              }

              if(verb === &quot;GET&quot;) {
                //  If &quot;GET&quot; only send data from request field mapppings
                _.extend(ajaxConfiguration.data, this.buildRequestFieldMappings(model, targetConfiguration, context));
              } else {
                //  Else send body payload template if present or request field mappings if no body template is provided
                if(targetConfiguration.body_payload_template &amp;&amp; targetConfiguration.body_payload_template !== &quot;&quot;) {
                  var bodyPayload = this.buildBodyPayload(model, targetConfiguration, context);
                  if(targetConfiguration.body_format === &quot;json&quot; || targetConfiguration.body_format === &quot;form-encoded&quot;) {
                    _.extend(ajaxConfiguration.data, bodyPayload);
                  } else if(targetConfiguration.body_format === &quot;xml&quot;) {
                    ajaxConfiguration.data = bodyPayload;
                  }
                } else {
                  var requestFields = this.buildRequestFieldMappings(model, targetConfiguration, context);
                  if(targetConfiguration.body_format === &quot;json&quot; || targetConfiguration.body_format === &quot;form-encoded&quot;) {
                    _.extend(ajaxConfiguration.data, requestFields);
                  } else if(targetConfiguration.body_format === &quot;xml&quot;) {
                    requestFields = _XML.objectToXmlString(model.name, requestFields);
                    ajaxConfiguration.data = requestFields;
                  }
                }

                //  If sending data as body payload then add appropiate format
                if(targetConfiguration.body_format === &quot;form-encoded&quot;) {
                  ajaxConfiguration.contentType = &quot;application/x-www-form-urlencoded; charset=UTF-8&quot;;
                } else if(targetConfiguration.body_format === &quot;xml&quot;) {
                  ajaxConfiguration.contentType = &quot;text/xml&quot;;
                } else {
                  ajaxConfiguration.contentType = &quot;application/json&quot;;
                }
              }

              ajaxConfiguration.success = (function(_this) {
                return function(data, textStatus, jqXHR) {
                  var responseData = _this.mapResponse(model, data, targetConfiguration);
                  if(_options.success &amp;&amp; _options.success instanceof Function) {
                    _options.success.call(this, responseData);
                  }
                };
              })(this);

              ajaxConfiguration.error = function(resp) {
                var error = _options.error;
                if (error) error.call(_options.context, model, resp, _options);
                model.trigger(&#x27;error&#x27;, model, resp, _options);
              }

              return ajaxConfiguration;
          }

          return null;
        },

        /**
        * Map the data returned from the server to a {AP.model.Model} or {AP.collection.Collection}
        * @method mapResponse
        * @param {AP.model.Model}/{AP.collection.Collection}
        * @param {Object} server data
        * @param {Object}
        * @returns {Object}/{Array} data to add to the model or collection (setting the data is left to Backbone)
        */
        mapResponse: function(model, data, targetConfiguration) {
          var selectedData = data;
          if(targetConfiguration.path_selector &amp;&amp; targetConfiguration.path_selector !== &quot;&quot;) {
            selectedData = this.getPath(targetConfiguration.path_selector, data);
            if(selectedData === false || selectedData === undefined) {
              selectedData = data;
            }
          }
          var responseData = this.buildResponseFieldMappings(model, selectedData, targetConfiguration);
          return responseData;
        },

        /**
        * Send model data to the server
        * @method send
        * @param {String} action being performed
        * @param {AP.model.Model}/{AP.collection.Collection} model/collection to sync with the server
        * @param {Object} options
        */
        send: function(actionName, model, options) {

          var request = this.buildRequest(actionName, model, options);
          if(request) {
            return $.ajax(request);
          }
          return null;
        }
    });

    return _HttpAdapter;

})(AP.utility.createClass, AP.utility.JSON, AP.utility.XML);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
